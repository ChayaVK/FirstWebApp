<!DOCTYPE html>
<html>
<head>
  <title>Forgot Password</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>


<div class="container">
  <h1 style="color:black">Password reset</h1>
  <input id="email" type="email" placeholder="Email" required>
  <input id="password" type="password" placeholder="Password" required>
  <input id="confirm-password" type="password" placeholder="Confirm-Password" required>

  <button type="submit" class="save" onclick="reset_password()">Reset Password</button>
  <p id="resetError" style="color:red;font-size:12px;"></p>

  <p id="resetmessage" style="font-size:12px;"></p>

    <button type="button" onclick="login()">Login</button>
</div>

  <script src="../js/config.js"></script>
  <script>

  
async function reset_password() {

  const emailInput = document.getElementById("email");
  const passwordInput = document.getElementById("password");
  const confirmpasswordInput = document.getElementById("confirm-password");
  //const errorEl = document.getElementById("resetError");
  const messageM1 = document.getElementById("resetmessage");

  const payload = {
    
    email: emailInput.value,
    password: passwordInput.value,
    confirmPassword: confirmpasswordInput.value
  };
  
    if (!emailInput.value || !passwordInput.value || !confirmpasswordInput.value) {
    messageM1.style.color = "red";
    messageM1.innerText = "Email, password & confirm-password are required";
    return;
  }

    if(passwordInput.value===confirmpasswordInput.value)
  {
 console.log("Sending from UI:", payload);
  
  const res = await fetch(`${API_BASE_URL}/reset-password`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
    
  });
   
  const data = await res.json(); // ‚≠ê THIS IS THE KEY

  if (!res.ok) {
    messageM1.style.color = "red";
    messageM1.innerText = data.message;
    return;
  }

  messageM1.style.color = "green";
  messageM1.innerText = data.message;

  }
 else{
    messageM1.style.color = "red";
    messageM1.innerText = "Password & confirm-password should exactly match";
    return;
 }


}

function login()
{
  window.location.href = "login.html";
}
  </script>

</body>

</html>